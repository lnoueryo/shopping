## 1. App&Error
**Overview**: 通常は`@/app.vue`がルートになっているが、サーバー側でエラーが発生した場合`@/error.vue`がルートに変わる。
### Common
- **各ページのキャッシュ**
  - **Purpose**: Nuxtのデフォルトで各ページはダイナミックコンポーネントとして定義されているようである。そのためオフラインにした場合や通信エラーが起きた場合ページを標示してくれない。アクセス時にあらかじめキャッシュすることでユーザーが最低限操作できる
  - **Acceptance Criteria**:
    - app.vueのpreloadRouteComponentsに定義されているページはオフライン時でも問題なく表示される
    - アクセスしたページにあるNuxtLinkのパスに設定されているページはオフライン時でも表示される
  ---
- **オフライン通知**:
  - **Purpose**: オフラインであることを伝えることで、ユーザーがアプリを正常に操作できないことを認識することができる
  - **Acceptance Criteria**:
    - オフライン時にスナックバーで通知する
    - オンラインに戻った時も通知する
  ---
- **ファイルのキャッシュ**:
  - **Purpose**: オフラインであることにより表示されなくなるイメージがキャッシュすることで表示されるようになる
  - **Acceptance Criteria**:
    - オフライン時でもイメージが表示される
      - Frontendロードマップ
      - Backendロードマップ
      - Androidロードマップ
      - DevOpsロードマップ
      - QAロードマップ
      - 書籍情報 NoImage
      - 404
      - Error Connection
  ---
### Error
- **404ページの表示**
  -**Purpose**: 存在しないページを明示的に知らせることでUXを向上させる
  - **Acceptance Criteria**:
    - URLから直接404ページにアクセスした場合404ページを返す
    - ヘッダーとフッター表示され、ホームにリダイレクトするボタンが表示されている
    - ブラウザバックすると直接URLからアクセスする前のページに戻る
    - リダイレクトボタンを押下後にブラウザバックすると`/error?next=/&status=404`に遷移する(サーバーのエラーではないため)
    - リロードした場合、URLはそのままで404ページを返す
  ---
## 2. Layout
### Default
#### Header
- **ホームページリダイレクト**
  - **Purpose**: いつでもホーム画面に戻ることができる
  - **Acceptance Criteria**:
    - ロゴを押下するとホーム画面にリダイレクトする
  ---
- **キーワード書籍検索**
  **Purpose:** 興味のある書籍が既にある場合、キーワードですぐに検索することができる
  **Acceptance Criteria:**
  - 文字列を1文字以上入力し、エンターまたはサーチボタンを押下で書籍一覧ページに遷移する
  - 入力せずにエンターまたはサーチボタンを押下すると、ページ遷移しない
  - 101文字以上入力して検索すると検索できない主旨のメッセージが表示される
  - 遷移時のパラメーターは`/books?keyword={keyword}`となる
  - レート・スキルレベルのパラメーターがある場合、そのまま引き継がれる
  - ジャンルパラメーターは削除される
  - キーワードの検索結果に応じた書籍一覧が表示される
  ---
- **ヘッダー固定検索バー(SP)**
  **Purpose:** 上部に戻らずにその場で書籍を検索できる
  **Acceptance Criteria:**
  - スクロールでヘッダーを過ぎるとテキストボックスが上部に固定される
  - スクロールでヘッダーあたりまで戻るとテキストボックスが元の位置に戻る
  ---
#### Navigation
- **エンジニア別ロードマップ遷移**
  - **Purpose:** エンジニア別ロードマップページにどのページからでも遷移できる
  - **Acceptance Criteria:**
    - Homeを押下するとHomeページに遷移する
    - その他ナビゲーションのボタンを押下するとそのページに遷移する
    - 遷移先のパスは`/{navName}`となる
  ---
#### Footer
- **SNS遷移**
  - **Purpose**: 管理者の情報を知ることができる
  - **Acceptance Criteria**:
    - ロゴを押下するとブラウザの別タブを開き、各サイトに遷移する
  ---
## 3. Page
### Home
**Path:** `/`

- **ジャンル書籍検索**
**Purpose:** 目的の書籍がないときにジャンル検索で興味のありそうな書籍を探すことができる
**Acceptance Criteria:**
  - 各ジャンルパネルを押下すると書籍一覧ページに遷移する
  - tabでフォーカスした場合、エンターを押下で書籍一覧ページに遷移する
  - 遷移時のパラメーターは`/books?genre={id}`となる
  - ジャンルの検索結果に応じた書籍一覧が表示される
  ---
### Error
**Path** `/error`

- **存在しないページ表示**
**Purpose**: 存在しないページを明示的に知らせることでUXを向上させる
**Acceptance Criteria**:
  - サーバー側のエラー時に表示されるページと同じものが表示される
  - ステータスコードと前回のページのパスをパラメーターにのせる: `/error?next=/frontend&status=404`
  - ブラウザバックした場合、前回のページに戻る
  - ページ遷移のボタンを押下した場合、前回のページに戻る
  - ページ遷移のボタンを押下後ブラウザバックした場合、エラーページに戻る
  - リロードした場合、前回のページに戻る
  ---
- **通信エラー表示**
**Purpose**: 通信が不安定でデータを取得できていないことを明示的に知らせることでUXを向上させる
**Acceptance Criteria**:
  - サーバー側のエラー時に表示されるページと同じレイアウトが表示され、コネクションエラーのイメージが表示される
  - ステータスコードと前回のページのパスをパラメーターにのせる: `/error?next=/frontend&status=503`
  ---
### Book List
**Path:** `/books`

- **ルーティング**
**Purpose:** URLを直接たたかれた場合、いくつかの条件で不正なパラメーターとなるのでミドルウェアで制御し、404を返す
**Acceptance Criteria:**
  - 下記条件でアクセスすると404を返す
    - genreとkeyword両方を含む: `/books?genre={id}&keyword={keyword}`
    - genreに不正なidを指定: `/books?genre=xxxxxxxxx`
    - rateが0未満または5以上を指定: `/books?rate=-1`
    - levelsに不正な値を指定: `/books?levels=xxxxxxx`
  ---
- **サイドバージャンル書籍検索(PC)**
**Purpose:** フローティングサイドバーにすることでいつでも絞り込むことができる。また、絞り込み条件が簡単に確認できる。
**Acceptance Criteria:**
  - 各ジャンルパネルを押下するとジャンルで絞りこまれる
  - tabでフォーカスした場合、エンターを押下で書籍一覧ページに遷移する
  - 遷移時のパラメーターは`/books?genre={id}`となる
  - レート・スキルレベルのパラメーターがある場合、そのまま引き継がれる
  - キーワードパラメーターは削除される
  - トップに自動スクロールされる
  - ジャンルの検索結果に応じた書籍一覧が表示される
  - 画面をスクロールするとヘッダー以降固定される
  ---
- **レビュー絞り込み**
**Purpose:** ある程度人気で信頼性のある書籍を検索できる
**Acceptance Criteria:**
  - レビュー1～4まで選択できる
  - アクティブなレートを再度押下すると絞り込みが解除される
  - tabでフォーカスした場合、エンターを押下で選択できる
  - 遷移時のパラメーターは`/books?rate={rate}`となる
  - キーワード・ジャンル・スキルレベルのパラメーターがある場合、そのまま引き継がれる
  - レビューが選択したレート以上の書籍一覧が表示される
  - SPでも押下可能なくらい余白を取っている
  ---
- **スキルレベル絞り込み**
**Purpose:** どのエンジニアも自分に合ったレベルの書籍を探すことができる
**Acceptance Criteria:**
  - **`Beginner`**・**`Intermediate`**・**`Advanced`**の3つから選択できる
  - 複数選択できる
  - アクティブになっている条件を再度押下すると絞り込みから削除される
  - tabでフォーカスした場合、エンターを押下で選択できる
  - 全選択のパラメーターは`/books?&levels=beginner&levels=intermediate&levels=advanced`となる
  - キーワード・レート・レートのパラメーターがある場合、そのまま引き継がれる
  - スキルレベルに紐づいている書籍一覧が表示される
  ---
- **書籍一覧表示**
**Purpose:** 必要な情報を簡潔に確認できる
**Acceptance Criteria:**
  - 下記内容が表示される
    - 本のサムネイル
    - タイトル
    - 著者
    - 出版社
    - 出版日
    - キャプション
    - 金額
    - レート
  - モバイルの場合下記内容が非表示になる
    - キャプション
  - 検索中スピナーが表示される
  - サーバーエラー、通信エラーの場合、その趣旨のメッセージが表示される
  - レートは押下しても何も起きない
  - 本のサムネイルが表示されるまでスピナーが表示される
  - 本のサムネイルが読み込めなかった場合、No Image画像が表示される
  - No Imageはキャッシュしているためオフラインでも表示される

  ---
- **ページネーション**
**Purpose:** 一度に全ての検索結果を表示するとパフォーマンスを落とすので小分けして表示する
**Acceptance Criteria:**
  - 書籍一覧上に検索結果の総数と現在表示されている範囲が表示される
  - ページ番号を押下するとそのページを表示する
  - 矢印を押下すると現在のページから1つ前または後のページを表示する
  - ...を押下すると現在のページから3つ前または後のページを表示する
  - ボタンを押下後、一番上にスクロールする
  - 現在のページの次のページがない場合、矢印ボタンが無効になる
  - SPの場合、ページ番号がスクロール可能になる

  ---
- **絞り込み条件アコーディオン**
**Purpose:** 上部に戻らずにその場で書籍を絞りこむことができる
**Acceptance Criteria:**
  - 書籍一覧の最初の書籍あたりまでスクロールするとヘッダー固定テキストボックスの裏に隠れる
  - 上にスクロールするとヘッダー固定テキストボックスの下に表示される
  - 書籍一覧の最初の書籍あたりまで戻ると元の位置に戻る
  - アコーディオンのタイトルを押下するとレビュー、スキルレベル、ジャンルの絞り込みが表示される
  - tabでフォーカスした場合、エンターを押下でレビュー、スキルレベル、ジャンルの絞り込みが表示される
  - アコーディオンオープン時、書籍一覧リストは動かない
  - タイトルを再度押下すると絞り込み条件が適用され、アコーディオンが非表示となる
  - ヘッダーの手前まで自動スクロールされる
  - ヘッダーが見える場所で処理が実行されると自動スクロールされない
  - 絞り込み条件に変更がない場合書籍一覧を取得する通信は行われない
  ---